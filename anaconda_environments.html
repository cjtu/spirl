
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>5.2. Conda environments &#8212; Scientific Programming&lt;br&gt;In Real Life</title>
    
  <link href="_static/css/theme.css" rel="stylesheet" />
  <link href="_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.1c5a1a01449ed65a7b51.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="canonical" href="https://cjtu.github.io/spirl/anaconda_environments.html" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="5.1. Installing Anaconda" href="anaconda_installing.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/logo_spirl.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Scientific Programming<br>In Real Life</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="about.html">
   Scientific Programming IRL
  </a>
 </li>
</ul>
<p class="caption" role="heading">
 <span class="caption-text">
  SPIRL Course
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="f21_about.html">
   Fall 2021
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="f21_assignments.html">
     How To Submit Assignments
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="f21_a0.html">
     Assignment 0 (Sep 14)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="f21_a1.html">
     Assignment 1 (Sep 21)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="f21_a1_bonus.html">
     Assignment 1 (BONUS)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="f21_a2.html">
     Assignment 2 (Sep 28)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="f21_a3.html">
     Assignment 3 (Oct 05)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="f21_a4.html">
     Assignment 4 (Oct 12)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="f21_a5.html">
     Assignment 5 (Oct 19)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="f21_a6.html">
     Assignment 6 (Oct 26)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="f21_a7.html">
     Assignment 7 (Nov 2)
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption" role="heading">
 <span class="caption-text">
  SPIRL Textbook
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="bash_about.html">
   1. The Bash Shell
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="bash_shell.html">
     1.1. Meet the shell
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="bash_basics.html">
     1.2. Bash Basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="bash_scripts.html">
     1.3. Scripts and Permissions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="bash_tips.html">
     1.4. Extra tips and tricks
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="git_about.html">
   2. Version control with Git
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="git_overview.html">
     2.1. Git overview
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="git_basics.html">
     2.2. Git basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="git_remotes.html">
     2.3. Remotes and GitHub
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="git_practice.html">
     2.4. Practicing Git IRL
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="python_about.html">
   3. Programming in Python
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="python_style.html">
     3.1. Python Style
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="python_basics.html">
     3.2. Python basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="python_basic-types.html">
     3.3. Basic Data Types (bool, int, float, str, list, tuple)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="python_methods.html">
     3.4. Methods
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="python_functions.html">
     3.5. Functions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="python_conditionals.html">
     3.6. Conditionals
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="python_loops.html">
     3.7. Loops
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="python_adv-types.html">
     3.8. Advanced Data Types (set, dict)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="python_modules.html">
     3.9. Modules
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="python_str-formatting.html">
     3.10. String Formatting (Interactive)
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="sp_about.html">
   4. Scientific Programming
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="sp_jupyter.html">
     4.1. Jupyter Notebooks
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="sp_numpy.html">
     4.2. Numpy
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="sp_matplotlib.html">
     4.3. Matplotlib
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="sp_scipy.html">
     4.4. Scipy
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="sp_pandas.html">
     4.5. Pandas
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="sp_function-plotting.html">
     4.6. Function Plotting (Interactive)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="sandbox.html">
     4.7. Jupyter Sandbox
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="anaconda_about.html">
   5. Anaconda
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="anaconda_installing.html">
     5.1. Installing Anaconda
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     5.2. Conda environments
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Practice coding here: <br><a href='https://cjtu.github.io/spirl/sandbox'>Jupyter Sandbox</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/anaconda_environments.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/cjtu/spirl"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/cjtu/spirl/issues/new?title=Issue%20on%20page%20%2Fanaconda_environments.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#why-environments">
   5.2.1. Why Environments?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#creating-a-new-environment">
   5.2.2. Creating a New Environment
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#using-an-activated-environment">
   5.2.3. Using an activated environment
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installing-packages">
   5.2.4. Installing packages
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#finding-new-packages">
   5.2.5. Finding new packages
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#anaconda-channels">
   5.2.6. Anaconda channels
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pip">
   5.2.7. Pip
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installing-packages-tl-dr">
   5.2.8. Installing Packages TL;DR
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#sharing-environments">
   5.2.9. Sharing environments
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-environment-yml">
   5.2.10. The environment.yml
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#deleting-environments">
   5.2.11. Deleting environments
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#creating-environments-from-a-yml">
   5.2.12. Creating environments from a yml
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#caveats-to-sharing-environments">
   5.2.13. Caveats to Sharing Environments
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="conda-environments">
<h1><span class="section-number">5.2. </span>Conda environments<a class="headerlink" href="#conda-environments" title="Permalink to this headline">¶</a></h1>
<p>Once you’ve installed Anaconda, when you open a new shell you should see the word <code class="docutils literal notranslate"><span class="pre">(base)</span></code> on the shell prompt (if not, try typing <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">--version</span></code> to make sure Anaconda installed properly and was set up). The word in parentheses is your active <strong>conda environment</strong>, by default this is the <em>base</em> environment.</p>
<div class="section" id="why-environments">
<h2><span class="section-number">5.2.1. </span>Why Environments?<a class="headerlink" href="#why-environments" title="Permalink to this headline">¶</a></h2>
<p>Virtual environments allow us to install packages into a self-contained location on our computer without affecting any other parts of our system. This is particularly useful is we have multiple projects, each with their own requirements and dependencies. Sometimes the dependencies of different projects can be conflicting, and we want to be careful about installing new packages which could break code we’ve written for another project.</p>
<p>Another good reason for virtual environments is <strong>reproducibility</strong>. If we develop and run our programs in virtual environments, we know the exact packages which allowed us to properly run the code, and we can later share this environment with collaborators, or be confident our code will run when we return to it a year or many years later.</p>
</div>
<div class="section" id="creating-a-new-environment">
<h2><span class="section-number">5.2.2. </span>Creating a New Environment<a class="headerlink" href="#creating-a-new-environment" title="Permalink to this headline">¶</a></h2>
<p>To make a conda environment, we use the command <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">create</span></code>. We need to specify a name of the environment with <code class="docutils literal notranslate"><span class="pre">-n</span></code>. We can also specify some packages we want to install right away. Try it in your shell!</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda create -n researchenv python numpy matplotlib jupyter
</pre></div>
</div>
<p><em>Aside</em>: if you want to install all of the default Anaconda packages (e.g. the ones available in the <code class="docutils literal notranslate"><span class="pre">base</span></code> environment), you can type <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">create</span> <span class="pre">-n</span> <span class="pre">&lt;envname&gt;</span> <span class="pre">anaconda</span></code>. We very rarely need <em>all</em> of the packages that come with Anaconda, and it is generally better to use as <em>few dependencies as possible</em>. An environment with only the packages you need has less chances of dependency conflicts and is more reproducible!</p>
<p>Once conda processes the dependencies of the packages you specified. Are you surprised by how many dependencies it takes to make <code class="docutils literal notranslate"><span class="pre">numpy</span></code>, <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> and <code class="docutils literal notranslate"><span class="pre">jupyter</span></code> work? Good thing conda can keep track of these dependencies for us!</p>
<p>Once you confirm with <code class="docutils literal notranslate"><span class="pre">y</span></code>, conda will install these packages in a self-contained environment called <code class="docutils literal notranslate"><span class="pre">researchenv</span></code>.</p>
<p>To activate an environment, we use the <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">activate</span> <span class="pre">&lt;envname&gt;</span></code> command. To deactivate an environment, type <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">deactivate</span></code> (no envname needed in <code class="docutils literal notranslate"><span class="pre">deactivate</span></code>). Try activating your new conda environment and listing the installed packages with <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">list</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda activate researchenv
</pre></div>
</div>
<p>Check your command prompt to ensure your environment is active (you should see <code class="docutils literal notranslate"><span class="pre">(researchenv)</span></code> at the beginning of the line).</p>
<p>We can check the packages in the current environment with the <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">list</span></code> command.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda list
</pre></div>
</div>
</div>
<div class="section" id="using-an-activated-environment">
<h2><span class="section-number">5.2.3. </span>Using an activated environment<a class="headerlink" href="#using-an-activated-environment" title="Permalink to this headline">¶</a></h2>
<p>If we start Python from an active conda environment, we will have access to the packages installed in that environment. We can test this by running a simple one-line Python script in the command line. Try the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python -c <span class="s2">&quot;import pandas&quot;</span>
</pre></div>
</div>
<p>Did you see an error? This is because we haven’t installed <code class="docutils literal notranslate"><span class="pre">pandas</span></code> in our conda environment. Instead let’s try importing an installed module like <code class="docutils literal notranslate"><span class="pre">numpy</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python -c <span class="s2">&quot;import numpy&quot;</span>
</pre></div>
</div>
<p>No error? That means <code class="docutils literal notranslate"><span class="pre">numpy</span></code> is available in our environment!</p>
<p>Now let’s try deactivating our environment and see what packages the conda <code class="docutils literal notranslate"><span class="pre">base</span></code> environment provides.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda deactivate
conda list
</pre></div>
</div>
<p>The default conda environment comes with <em>a lot</em> of packages. If you encounter long unwieldy output on the command line, you can always search it by piping (<code class="docutils literal notranslate"><span class="pre">|</span></code>) it to the <code class="docutils literal notranslate"><span class="pre">grep</span></code> bash command. Say we want to see if <code class="docutils literal notranslate"><span class="pre">pandas</span></code> is included in the <code class="docutils literal notranslate"><span class="pre">base</span></code> environment, we can write:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda list <span class="p">|</span> grep pandas
</pre></div>
</div>
<p>Now what happens if we try to import pandas with the <code class="docutils literal notranslate"><span class="pre">base</span></code> conda environment active?</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python -c <span class="s2">&quot;import pandas&quot;</span>
</pre></div>
</div>
<p>No error! This example illustrates how conda environments are self-contained. Our <code class="docutils literal notranslate"><span class="pre">researchenv</span></code> does not know about any of the packages in <code class="docutils literal notranslate"><span class="pre">base</span></code>, it only has access to the ones we’ve installed in it. This makes it important to be aware of <em>which environment you have active</em>. If you get errors about packages that don’t exist, make sure you’ve <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">activate</span></code>d the right environment.</p>
<p>Say we want to use <code class="docutils literal notranslate"><span class="pre">pandas</span></code> in our tidy, self-contained <code class="docutils literal notranslate"><span class="pre">researchenv</span></code>. First we will need to activate our environment then install it!</p>
</div>
<div class="section" id="installing-packages">
<h2><span class="section-number">5.2.4. </span>Installing packages<a class="headerlink" href="#installing-packages" title="Permalink to this headline">¶</a></h2>
<p>Now let’s try installing a new package. When you use the <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span></code> command, it installs the package in the <em>currently active environment only</em>. Let’s install <code class="docutils literal notranslate"><span class="pre">pandas</span></code> in <code class="docutils literal notranslate"><span class="pre">researchenv</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda activate researchenv
conda install pandas
</pre></div>
</div>
<p>Once you’ve confirmed and conda is finished working, let’s check our list of installed packages. Remember, we can search for a word by piping output to <code class="docutils literal notranslate"><span class="pre">grep</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda list <span class="p">|</span> grep pandas
</pre></div>
</div>
<p>Great! You now know how to make environments, activate them and install new packages!</p>
</div>
<div class="section" id="finding-new-packages">
<h2><span class="section-number">5.2.5. </span>Finding new packages<a class="headerlink" href="#finding-new-packages" title="Permalink to this headline">¶</a></h2>
<p>Often we don’t know what packages exist or do the things we want them to do. Sometimes a simple Google search about the program you are writing will reveal that many others have had the same problem and have already written a package to solve it!</p>
<p>Say we want to work with GeoSpatial data in Python and some Googling reveals the <code class="docutils literal notranslate"><span class="pre">rasterio</span></code> package. First we should check if it is available from Anaconda by Googling “conda packages”, or just going straight to this <a class="reference external" href="https://anaconda.org/anaconda/repo">link</a>.</p>
<p>On this page we can search for packages available to be installed by Anaconda (most well-used packages are). Try searching for <code class="docutils literal notranslate"><span class="pre">rasterio</span></code> in the search box.</p>
<p>My search revealed two top results:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">conda-forge/rasterio</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">anaconda/rasterio</span></code></p></li>
</ul>
</div>
<div class="section" id="anaconda-channels">
<h2><span class="section-number">5.2.6. </span>Anaconda channels<a class="headerlink" href="#anaconda-channels" title="Permalink to this headline">¶</a></h2>
<p>It seems <code class="docutils literal notranslate"><span class="pre">rasterio</span></code> has two versions of the package available from two different <em>channels</em> of Anaconda. The <code class="docutils literal notranslate"><span class="pre">anaconda</span></code> channel is the default, and your <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span></code> command will generally install from <code class="docutils literal notranslate"><span class="pre">anaconda</span></code>. The <code class="docutils literal notranslate"><span class="pre">conda-forge</span></code> channel is a community initiative to make open-source community packages easier to access. Sometimes packages will only be available here (or in the case of <code class="docutils literal notranslate"><span class="pre">rasterio</span></code>, we can see that the <code class="docutils literal notranslate"><span class="pre">conda-forge</span></code> version has many more downloads and is probably the one we want).</p>
<p>We can install packages from a particular channel by using the <code class="docutils literal notranslate"><span class="pre">-c</span></code> option to <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span></code>. Make sure your <code class="docutils literal notranslate"><span class="pre">researchenv</span></code> is active, then try the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda install -c conda-forge rasterio
</pre></div>
</div>
</div>
<div class="section" id="pip">
<h2><span class="section-number">5.2.7. </span>Pip<a class="headerlink" href="#pip" title="Permalink to this headline">¶</a></h2>
<p>Sometimes a package is not available for install from any channels of Anaconda, but it may still be available from the default Python package manager, <code class="docutils literal notranslate"><span class="pre">pip</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span></code> command is similar to <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span></code>, and should still install Python packages and their dependencies. The main advantage of using <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span></code> over <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span></code> is that <code class="docutils literal notranslate"><span class="pre">conda</span></code> is not language-specific. Packages installed with conda can have dependencies not necessarily written in Python, and conda will be able to install and keep track of those non-Python packages for for you. Pip will handle Python dependencies only.</p>
<p>There is no problem with using both <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span></code> and <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span></code> within a conda environment, though it is best practice to try stay consistent and use <code class="docutils literal notranslate"><span class="pre">conda</span></code> where possible</p>
</div>
<div class="section" id="installing-packages-tl-dr">
<h2><span class="section-number">5.2.8. </span>Installing Packages TL;DR<a class="headerlink" href="#installing-packages-tl-dr" title="Permalink to this headline">¶</a></h2>
<p>First find the name of a new package you would like to install (via Google, word of mouth, the Python Package Classifieds in the newspaper, etc.)</p>
<ul class="simple">
<li><p>Search the Anaconda <a class="reference external" href="https://anaconda.org/anaconda/repo">package list</a> for the package</p></li>
<li><p>if it is only available from <code class="docutils literal notranslate"><span class="pre">anaconda</span></code> or this version has the most installs, use <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">&lt;name&gt;</span></code></p></li>
<li><p>if it is only available from <code class="docutils literal notranslate"><span class="pre">conda-forge</span></code> or this version has the most installs, use <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">-c</span> <span class="pre">conda-forge</span> <span class="pre">&lt;name&gt;</span></code></p></li>
<li><p>if neither is available, use <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">&lt;name&gt;</span></code></p></li>
</ul>
<p>Now we have the tools we need to find and install packages into Anaconda environments! Feel free to make a new environment whenever you start a new project or want to try installing a new package without knowing if it will conflict with your current packages. Conda environments can help us keep our code packages tidy and reproducible!</p>
<p>In the next section we will learn to make an exact copy of our environment to share with collaborators or store for our future selves to ensure we can reproduce our results.</p>
</div>
<div class="section" id="sharing-environments">
<h2><span class="section-number">5.2.9. </span>Sharing environments<a class="headerlink" href="#sharing-environments" title="Permalink to this headline">¶</a></h2>
<p>Say we want to send our conda environment to a collaborator so that they can run some code that we wrote. Or maybe we simply want a list of the packages we used to get a result to make sure we can use produce the same result in the future.</p>
</div>
<div class="section" id="the-environment-yml">
<h2><span class="section-number">5.2.10. </span>The environment.yml<a class="headerlink" href="#the-environment-yml" title="Permalink to this headline">¶</a></h2>
<p>Anaconda provides us with a way to build an identical environment using a special configuration file usually called <code class="docutils literal notranslate"><span class="pre">environment.yml</span></code>. To generate this file, we use the <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">env</span> <span class="pre">export</span></code> command. This command simply produces a list of the packages currently installed in our active conda environment. If we pipe this output to <code class="docutils literal notranslate"><span class="pre">environment.yml</span></code>, voila! We have instructions for Anaconda to reproduce our environment.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda env <span class="nb">export</span> &gt; environment.yml
</pre></div>
</div>
<p>Now we have an <code class="docutils literal notranslate"><span class="pre">environment.yml</span></code> file that looks something like:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">researchenv</span>
<span class="nt">channels</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">conda-forge</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">defaults</span>
<span class="nt">dependencies</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">&lt;package1&gt;=&lt;verion.major.minor&gt;</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">&lt;package2&gt;=&lt;verion.major.minor&gt;</span>
</pre></div>
</div>
<p>Now we can make a brand new environment using this <code class="docutils literal notranslate"><span class="pre">environment.yml</span></code> file.</p>
</div>
<div class="section" id="deleting-environments">
<h2><span class="section-number">5.2.11. </span>Deleting environments<a class="headerlink" href="#deleting-environments" title="Permalink to this headline">¶</a></h2>
<p>Let’s delete our <code class="docutils literal notranslate"><span class="pre">researchenv</span></code> environment with <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">remove</span> <span class="pre">--all</span></code>. The <code class="docutils literal notranslate"><span class="pre">--all</span></code> ensures that all packages and the environment are deleted (rather than simply deleting one package at a time from your environment).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda remove --name researchenv --all
</pre></div>
</div>
<p>We can check that the environment is deleted by trying to activate it:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda activate researchenv
</pre></div>
</div>
<p>Or we can list all available environments with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda env list
</pre></div>
</div>
</div>
<div class="section" id="creating-environments-from-a-yml">
<h2><span class="section-number">5.2.12. </span>Creating environments from a yml<a class="headerlink" href="#creating-environments-from-a-yml" title="Permalink to this headline">¶</a></h2>
<p>Now we can make an identical environment with the <code class="docutils literal notranslate"><span class="pre">environment.yml</span></code> file that we saved:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda env create -f environment.yml
conda activate researchenv
conda list
</pre></div>
</div>
<p>You should now see all of the files that we previously had in <code class="docutils literal notranslate"><span class="pre">researchenv</span></code></p>
</div>
<div class="section" id="caveats-to-sharing-environments">
<h2><span class="section-number">5.2.13. </span>Caveats to Sharing Environments<a class="headerlink" href="#caveats-to-sharing-environments" title="Permalink to this headline">¶</a></h2>
<p>Now that we have an <code class="docutils literal notranslate"><span class="pre">environment.yml</span></code> file, we <em>should</em> be able to send it to a collaborator, and have them run <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">env</span> <span class="pre">create</span> <span class="pre">-f</span> <span class="pre">environment.yml</span></code> to have a copy of our working environment.</p>
<p>One caveat is that certain packages depend on the operating system that the code is being run on, and Anaconda will not always be able to exactly reproduce the environment on another system. Using an <code class="docutils literal notranslate"><span class="pre">environmnet.yml</span></code> works best on the same OS that it was created on.</p>
<p>To make our code truly distributable and reproducible on other machines, we get into the realm of developing open source packages and publishing them to be installable with <code class="docutils literal notranslate"><span class="pre">pip</span></code> or <code class="docutils literal notranslate"><span class="pre">conda</span></code>. While this is a deep topic outside the scope of this book, there are many resources online for exploring this further if you want to share your awesome package with the community!</p>
<p>Now you know all you need to get started using Anaconda and managing environments for your programming projects. Everything you need to know about Anaconda environments is available <a class="reference external" href="https://conda.io/docs/user-guide/tasks/manage-environments.html">here</a> (or like everything else, via Google search).</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            



<div class='prev-next-bottom'>
    
    <div id="prev">
        <a class="left-prev" href="anaconda_installing.html" title="previous page">
            <i class="prevnext-label fas fa-angle-left"></i>
            <div class="prevnext-info">
                <p class="prevnext-label">previous</p>
                <p class="prevnext-title"><span class="section-number">5.1. </span>Installing Anaconda</p>
            </div>
        </a>
    </div>

</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Christian J. Tai Udovicic <a href="https://github.com/cjtu/spirl/graphs/contributors">et. al</a><br/>
        
            &copy; Copyright 2021.<br/>
          <div class="extra_footer">
            <a href='https://cjtu.github.io'>About Christian</a> <a href='https://jupyterbook.org/'>About this JupyterBook</a>
          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
<script async="" src="https://www.google-analytics.com/analytics.js"></script>
<script>
                        window.ga = window.ga || function () {
                            (ga.q = ga.q || []).push(arguments) };
                        ga.l = +new Date;
                        ga('create', 'UA-111642150-3', 'auto');
                        ga('set', 'anonymizeIp', true);
                        ga('send', 'pageview');
                    </script>

  </body>
</html>